{"ast":null,"code":"var _jsxFileName = \"/Users/lauraschultz/Documents/projects/trivia/frontend/src/App.js\";\nimport React, { Component } from \"react\";\nimport io from \"socket.io-client\";\nexport class App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.countdownTimer = n => {\n      this.setState({\n        countdownTime: n\n      });\n\n      if (n > 0) {\n        setTimeout(() => this.countdownTimer(n - 1), 1000);\n      }\n    };\n\n    this.handleNewGameID = gameID => {\n      this.setState({\n        gameID: gameID\n      });\n    };\n\n    this.joinGame = () => {\n      this.setState({\n        isGameCreator: false\n      });\n      this.socket.emit(\"join game\", this.state.gameID, callbackData => {\n        if (callbackData.sucess) {\n          this.setState({\n            appState: \"join\"\n          }); // this.handleTyping(true);\n        } else {\n          console.log(callbackData.errorMsg);\n        }\n      });\n    };\n\n    this.createNewGame = () => {\n      this.setState({\n        isGameCreator: true,\n        appState: \"join\"\n      });\n      this.socket.emit(\"create new game\", {}, gameID => {\n        console.log(\"got gameid from callback: \" + gameID);\n        this.setState({\n          gameID: gameID\n        });\n      });\n    };\n\n    this.startGame = () => {\n      this.socket.emit(\"start game\", {\n        gameID: this.state.gameID,\n        data: \"whatsup\"\n      });\n      this.setState({\n        appState: \"play\"\n      });\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n      console.log(\"changed \" + event.target.name + \" to \" + event.target.value);\n    };\n\n    this.handleSubmitName = () => {\n      // this.handleTyping(false);\n      this.socket.emit(\"submit name\", {\n        gameID: this.state.gameID,\n        playerName: this.state.playerName\n      });\n      this.socket.emit(\"joining\", {\n        numInc: -1,\n        gameID: this.state.gameID\n      });\n    };\n\n    this.socket = io.connect(\"http://localhost:4000\");\n    this.state = {\n      userAnswer: \"-1\",\n      isCorrectAnswer: 0,\n      // ⬆️ https://stackoverflow.com/a/4666482/4493137\n      gameID: \"\",\n      playerName: \"\",\n      appState: \"init\",\n      isGameCreator: false,\n      numTypers: 0\n    };\n  }\n\n  componentDidMount() {\n    this.socket.on(\"start countdown\", countdownLength => {\n      this.countdownTimer(countdownLength);\n      this.setState({\n        appState: \"play\"\n      });\n    });\n    this.socket.on(\"question\", q => {\n      this.setState({\n        currentQuestion: q,\n        correctAnswer: undefined,\n        userAnswer: \"-1\"\n      });\n    });\n    this.socket.on(\"request answer\", () => {\n      // validate on client or server side????????\n      // server also needs to know for the score... so might as well do it there....\n      this.socket.emit(\"validate answer\", {\n        answer: this.state.userAnswer,\n        questionNum: this.state.currentQuestion.index,\n        gameID: this.state.gameID\n      }, ({\n        isCorrect,\n        correctAnswer\n      }) => {\n        this.setState({\n          correctAnswer: correctAnswer\n        });\n      });\n    });\n    this.socket.on(\"number typers\", n => this.setState({\n      numTypers: n\n    }));\n    this.socket.on(\"players\", p => this.setState({\n      players: p\n    }));\n    this.socket.on(\"joining\", n => {\n      console.log(\"num joiners is \" + n);\n      this.setState({\n        numJoiners: n\n      });\n    });\n    this.socket.on(\"game over\", () => this.setState({\n      currentQuestion: undefined,\n      correctAnswer: undefined,\n      userAnswer: \"-1\"\n    }));\n  }\n\n  render() {\n    if (this.state.appState === \"init\") {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        for: \"gameID\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }\n      }, \"join a game:\"), /*#__PURE__*/React.createElement(\"input\", {\n        id: \"gameID\",\n        name: \"gameID\",\n        placeholder: \"game code\",\n        value: this.state.gameID,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.joinGame,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }\n      }, \"join\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }\n      }), \"---- or ----\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.createNewGame,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }\n      }, \"create new game\"));\n    }\n\n    if (this.state.appState === \"join\") {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }\n      }, this.state.gameID), /*#__PURE__*/React.createElement(\"input\", {\n        name: \"playerName\",\n        onChange: this.handleChange,\n        value: this.state.playerName,\n        placeholder: \"your name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.handleSubmitName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }\n      }, \"submit\"), this.state.isGameCreator && /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.startGame,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 13\n        }\n      }, \"start game\"), this.state.numJoiners > 0 && /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 15\n        }\n      }, \"someone is joining...\")), this.state.players && /*#__PURE__*/React.createElement(\"ul\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 15\n        }\n      }, \"Players:\"), Object.entries(this.state.players).map(([id, pl]) => {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 24\n          }\n        }, pl.name);\n      })));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 7\n      }\n    }, this.state.countdownTime > 0 && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }\n    }, \"starting game in \", this.state.countdownTime), this.state.currentQuestion && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 13\n      }\n    }, this.state.currentQuestion.question), this.state.currentQuestion.answers.map((a, idx) => /*#__PURE__*/React.createElement(\"label\", {\n      key: idx,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"radio\",\n      name: \"userAnswer\",\n      value: idx,\n      onChange: this.handleChange,\n      className: idx === this.state.correctAnswer ? \"right\" : \"wrong\",\n      checked: this.state.userAnswer === idx.toString(),\n      disabled: this.state.correctAnswer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }\n    }), a))), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }\n    }, this.state.correctAnswer), this.state.players && /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 13\n      }\n    }, \"Leaderboard:\"), Object.entries(this.state.players).map(([id, pl]) => {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        key: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 19\n        }\n      }, pl.name), \": \", pl.score);\n    })));\n  }\n\n}\nexport default App;","map":{"version":3,"sources":["/Users/lauraschultz/Documents/projects/trivia/frontend/src/App.js"],"names":["React","Component","io","App","constructor","props","countdownTimer","n","setState","countdownTime","setTimeout","handleNewGameID","gameID","joinGame","isGameCreator","socket","emit","state","callbackData","sucess","appState","console","log","errorMsg","createNewGame","startGame","data","handleChange","event","target","name","value","handleSubmitName","playerName","numInc","connect","userAnswer","isCorrectAnswer","numTypers","componentDidMount","on","countdownLength","q","currentQuestion","correctAnswer","undefined","answer","questionNum","index","isCorrect","p","players","numJoiners","render","Object","entries","map","id","pl","question","answers","a","idx","toString","score"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport io from \"socket.io-client\";\n\nexport class App extends Component {\n  constructor(props) {\n    super(props);\n    this.socket = io.connect(\"http://localhost:4000\");\n    this.state = {\n      userAnswer: \"-1\",\n      isCorrectAnswer: 0,\n      // ⬆️ https://stackoverflow.com/a/4666482/4493137\n      gameID: \"\",\n      playerName: \"\",\n      appState: \"init\",\n      isGameCreator: false,\n      numTypers: 0,\n    };\n  }\n\n  componentDidMount() {\n    this.socket.on(\"start countdown\", (countdownLength) => {\n      this.countdownTimer(countdownLength);\n      this.setState({\n        appState: \"play\",\n      });\n    });\n    this.socket.on(\"question\", (q) => {\n      this.setState({\n        currentQuestion: q,\n        correctAnswer: undefined,\n        userAnswer: \"-1\",\n      });\n    });\n    this.socket.on(\"request answer\", () => {\n      // validate on client or server side????????\n      // server also needs to know for the score... so might as well do it there....\n      this.socket.emit(\n        \"validate answer\",\n        {\n          answer: this.state.userAnswer,\n          questionNum: this.state.currentQuestion.index,\n          gameID: this.state.gameID,\n        },\n        ({ isCorrect, correctAnswer }) => {\n          this.setState({ correctAnswer: correctAnswer });\n        }\n      );\n    });\n    this.socket.on(\"number typers\", (n) => this.setState({ numTypers: n }));\n    this.socket.on(\"players\", (p) => this.setState({ players: p }));\n    this.socket.on(\"joining\", (n) => {\n      console.log(\"num joiners is \" + n);\n      this.setState({ numJoiners: n });\n    });\n    this.socket.on(\"game over\", () =>\n      this.setState({\n        currentQuestion: undefined,\n        correctAnswer: undefined,\n        userAnswer: \"-1\",\n      })\n    );\n  }\n\n  countdownTimer = (n) => {\n    this.setState({ countdownTime: n });\n    if (n > 0) {\n      setTimeout(() => this.countdownTimer(n - 1), 1000);\n    }\n  };\n\n  handleNewGameID = (gameID) => {\n    this.setState({ gameID: gameID });\n  };\n\n  joinGame = () => {\n    this.setState({ isGameCreator: false });\n    this.socket.emit(\"join game\", this.state.gameID, (callbackData) => {\n      if (callbackData.sucess) {\n        this.setState({ appState: \"join\" });\n        // this.handleTyping(true);\n      } else {\n        console.log(callbackData.errorMsg);\n      }\n    });\n  };\n\n  createNewGame = () => {\n    this.setState({ isGameCreator: true, appState: \"join\" });\n    this.socket.emit(\"create new game\", {}, (gameID) => {\n      console.log(\"got gameid from callback: \" + gameID);\n      this.setState({ gameID: gameID });\n    });\n  };\n\n  startGame = () => {\n    this.socket.emit(\"start game\", {\n      gameID: this.state.gameID,\n      data: \"whatsup\",\n    });\n    this.setState({ appState: \"play\" });\n  };\n\n  handleChange = (event) => {\n    this.setState({\n      [event.target.name]: event.target.value,\n    });\n    console.log(\"changed \" + event.target.name + \" to \" + event.target.value);\n  };\n\n  // handleTyping = (isTyping) => {\n  //   this.socket.emit(\"handle typer\", {\n  //     gameID: this.state.gameID,\n  //     incNum: isTyping ? 1 : -1,\n  //   });\n  // };\n\n  handleSubmitName = () => {\n    // this.handleTyping(false);\n    this.socket.emit(\"submit name\", {\n      gameID: this.state.gameID,\n      playerName: this.state.playerName,\n    });\n    this.socket.emit(\"joining\", { numInc: -1, gameID: this.state.gameID });\n  };\n\n  render() {\n    if (this.state.appState === \"init\") {\n      return (\n        <div>\n          <label for=\"gameID\">join a game:</label>\n          <input\n            id=\"gameID\"\n            name=\"gameID\"\n            placeholder=\"game code\"\n            value={this.state.gameID}\n            onChange={this.handleChange}\n          />\n          <button onClick={this.joinGame}>join</button>\n          <br />\n          ---- or ----\n          <br />\n          <button onClick={this.createNewGame}>create new game</button>\n        </div>\n      );\n    }\n    if (this.state.appState === \"join\") {\n      return (\n        <div>\n          <p>{this.state.gameID}</p>\n          <input\n            name=\"playerName\"\n            onChange={this.handleChange}\n            value={this.state.playerName}\n            placeholder=\"your name\"\n          />\n          <button onClick={this.handleSubmitName}>submit</button>\n          {this.state.isGameCreator && (\n            <button onClick={this.startGame}>start game</button>\n          )}\n          {this.state.numJoiners > 0 && (\n            <p>\n              <i>someone is joining...</i>\n            </p>\n          )}\n          {this.state.players && (\n            <ul>\n              <h2>Players:</h2>\n              {Object.entries(this.state.players).map(([id, pl]) => {\n                return <li key={id}>{pl.name}</li>;\n              })}\n            </ul>\n          )}\n        </div>\n      );\n    }\n    return (\n      <div>\n        {this.state.countdownTime > 0 && (\n          <p>starting game in {this.state.countdownTime}</p>\n        )}\n        {this.state.currentQuestion && (\n          <div>\n            <p>{this.state.currentQuestion.question}</p>\n            {this.state.currentQuestion.answers.map((a, idx) => (\n              <label key={idx}>\n                <input\n                  type=\"radio\"\n                  name=\"userAnswer\"\n                  value={idx}\n                  onChange={this.handleChange}\n                  className={\n                    idx === this.state.correctAnswer ? \"right\" : \"wrong\"\n                  }\n                  checked={this.state.userAnswer === idx.toString()}\n                  disabled={this.state.correctAnswer}\n                />\n                {a}\n              </label>\n            ))}\n          </div>\n        )}\n        <p>{this.state.correctAnswer}</p>\n\n        {this.state.players && (\n          <ul>\n            <h2>Leaderboard:</h2>\n            {Object.entries(this.state.players).map(([id, pl]) => {\n              return (\n                <li key={id}>\n                  <b>{pl.name}</b>: {pl.score}\n                </li>\n              );\n            })}\n          </ul>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}