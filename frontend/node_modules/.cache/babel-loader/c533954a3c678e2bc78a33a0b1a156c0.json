{"ast":null,"code":"import _slicedToArray from\"/Users/lauraschultz/Documents/projects/trivia/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/lauraschultz/Documents/projects/trivia/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/lauraschultz/Documents/projects/trivia/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/lauraschultz/Documents/projects/trivia/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/lauraschultz/Documents/projects/trivia/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/lauraschultz/Documents/projects/trivia/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import io from\"socket.io-client\";import axios from\"axios\";export var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.countdownTimer=function(n){_this.setState({countdownTime:n});if(n>0){setTimeout(function(){return _this.countdownTimer(n-1);},1000);}};_this.handleNewGameID=function(gameID){_this.setState({gameID:gameID});};_this.joinGame=function(){_this.setState({isGameCreator:false});_this.socket.emit(\"join game\",_this.state.gameID,function(callbackData){if(callbackData.sucess){_this.setState({appState:\"join\"});// this.handleTyping(true);\n}else{console.log(callbackData.errorMsg);}});};_this.createNewGame=function(){_this.setState({isGameCreator:true,appState:\"join\"});_this.socket.emit(\"create new game\",{},function(gameID){console.log(\"got gameid from callback: \"+gameID);_this.setState({gameID:gameID});});axios.get(\"\".concat(_this.SERVER,\"/categories\")).then(function(cats){console.log(cats.data);_this.setState({categories:cats.data});});};_this.startGame=function(){_this.socket.emit(\"start game\",{gameID:_this.state.gameID,category:_this.state.category,difficulty:_this.state.difficulty,numberQuestions:_this.state.numberQuestions});_this.setState({appState:\"play\"});};_this.handleChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));console.log(\"changed \"+event.target.name+\" to \"+event.target.value);};_this.handleSubmitName=function(){// this.handleTyping(false);\n_this.socket.emit(\"submit name\",{gameID:_this.state.gameID,playerName:_this.state.playerName});_this.socket.emit(\"joining\",{numInc:-1,gameID:_this.state.gameID});};_this.SERVER=\"http://localhost:4000\";//\"https://crazytrivia.herokuapp.com/\"\n_this.socket=io.connect(_this.SERVER);_this.state={userAnswer:\"-1\",isCorrectAnswer:0,// ⬆️ https://stackoverflow.com/a/4666482/4493137\ngameID:\"\",playerName:\"\",appState:\"init\",isGameCreator:false,numTypers:0,numberQuestions:10};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.socket.on(\"start countdown\",function(countdownLength){_this2.countdownTimer(countdownLength);_this2.setState({appState:\"play\"});});this.socket.on(\"question\",function(q){_this2.setState({currentQuestion:q,correctAnswer:undefined,userAnswer:\"-1\"});});this.socket.on(\"request answer\",function(){// validate on client or server side????????\n// server also needs to know for the score... so might as well do it there....\n_this2.socket.emit(\"validate answer\",{answer:_this2.state.userAnswer,questionNum:_this2.state.currentQuestion.index,gameID:_this2.state.gameID},function(_ref){var isCorrect=_ref.isCorrect,correctAnswer=_ref.correctAnswer;_this2.setState({correctAnswer:correctAnswer});});});this.socket.on(\"number typers\",function(n){return _this2.setState({numTypers:n});});this.socket.on(\"players\",function(p){return _this2.setState({players:p});});this.socket.on(\"joining\",function(n){console.log(\"num joiners is \"+n);_this2.setState({numJoiners:n});});this.socket.on(\"game over\",function(){return _this2.setState({currentQuestion:undefined,correctAnswer:undefined,userAnswer:\"-1\"});});}},{key:\"render\",value:function render(){var _this3=this;if(this.state.appState===\"init\"){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{for:\"gameID\"},\"join a game:\"),/*#__PURE__*/React.createElement(\"input\",{id:\"gameID\",name:\"gameID\",placeholder:\"game code\",value:this.state.gameID,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"button\",{onClick:this.joinGame},\"join\"),/*#__PURE__*/React.createElement(\"br\",null),\"---- or ----\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{onClick:this.createNewGame},\"create new game\"));}if(this.state.appState===\"join\"){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,this.state.gameID),/*#__PURE__*/React.createElement(\"input\",{name:\"playerName\",onChange:this.handleChange,value:this.state.playerName,placeholder:\"your name\"}),/*#__PURE__*/React.createElement(\"button\",{onClick:this.handleSubmitName},\"submit\"),this.state.numJoiners>0&&/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"i\",null,\"someone is joining...\")),this.state.players&&/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Players:\"),Object.entries(this.state.players).map(function(_ref2){var _ref3=_slicedToArray(_ref2,2),id=_ref3[0],pl=_ref3[1];return/*#__PURE__*/React.createElement(\"li\",{key:id},pl.name);})),this.state.isGameCreator&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Select a category:\"),this.state.categories&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",name:\"selectedCategory\",value:-1,onChange:this.handleChange,checked:this.state.selectedCategory===\"-1\"}),\"Any category\"),this.state.categories.map(function(cat){return/*#__PURE__*/React.createElement(\"label\",{key:cat.id},/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",name:\"selectedCategory\",value:cat.id,onChange:_this3.handleChange,checked:_this3.state.selectedCategory===cat.id.toString()}),cat.name);})),/*#__PURE__*/React.createElement(\"h2\",null,\"Select difficulty:\"),/*#__PURE__*/React.createElement(\"label\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",name:\"difficulty\",value:-1,onChange:this.handleChange,checked:this.state.difficulty===\"-1\"}),\"Any difficulty\"),/*#__PURE__*/React.createElement(\"label\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",name:\"difficulty\",value:\"easy\",onChange:this.handleChange,checked:this.state.difficulty===\"easy\"}),\"Easy\"),/*#__PURE__*/React.createElement(\"label\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",name:\"difficulty\",value:\"medium\",onChange:this.handleChange,checked:this.state.difficulty===\"medium\"}),\"Medium\"),/*#__PURE__*/React.createElement(\"label\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",name:\"difficulty\",value:\"hard\",onChange:this.handleChange,checked:this.state.difficulty===\"hard\"}),\"Hard\"),/*#__PURE__*/React.createElement(\"h2\",null,\"Number of questions\"),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",value:this.state.numberQuestions,name:\"numberQuestions\",onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"button\",{onClick:this.startGame},\"start game\")));}return/*#__PURE__*/React.createElement(\"div\",null,this.state.countdownTime>0&&/*#__PURE__*/React.createElement(\"p\",null,\"starting game in \",this.state.countdownTime),this.state.currentQuestion&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,this.state.currentQuestion.question),this.state.currentQuestion.answers.map(function(a,idx){return/*#__PURE__*/React.createElement(\"label\",{key:idx},/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",name:\"userAnswer\",value:idx,onChange:_this3.handleChange,className:idx===_this3.state.correctAnswer?\"right\":\"wrong\",checked:_this3.state.userAnswer===idx.toString(),disabled:_this3.state.correctAnswer}),a);})),/*#__PURE__*/React.createElement(\"p\",null,this.state.correctAnswer),this.state.players&&/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Leaderboard:\"),Object.entries(this.state.players).map(function(_ref4){var _ref5=_slicedToArray(_ref4,2),id=_ref5[0],pl=_ref5[1];return/*#__PURE__*/React.createElement(\"li\",{key:id},/*#__PURE__*/React.createElement(\"b\",null,pl.name),\": \",pl.score);})));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/lauraschultz/Documents/projects/trivia/frontend/src/App.js"],"names":["React","Component","io","axios","App","props","countdownTimer","n","setState","countdownTime","setTimeout","handleNewGameID","gameID","joinGame","isGameCreator","socket","emit","state","callbackData","sucess","appState","console","log","errorMsg","createNewGame","get","SERVER","then","cats","data","categories","startGame","category","difficulty","numberQuestions","handleChange","event","target","name","value","handleSubmitName","playerName","numInc","connect","userAnswer","isCorrectAnswer","numTypers","on","countdownLength","q","currentQuestion","correctAnswer","undefined","answer","questionNum","index","isCorrect","p","players","numJoiners","Object","entries","map","id","pl","selectedCategory","cat","toString","question","answers","a","idx","score"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport io from \"socket.io-client\";\nimport axios from \"axios\";\n\nexport class App extends Component {\n  constructor(props) {\n    super(props);\n    this.SERVER = \"http://localhost:4000\"; //\"https://crazytrivia.herokuapp.com/\"\n    this.socket = io.connect(this.SERVER);\n    this.state = {\n      userAnswer: \"-1\",\n      isCorrectAnswer: 0,\n      // ⬆️ https://stackoverflow.com/a/4666482/4493137\n      gameID: \"\",\n      playerName: \"\",\n      appState: \"init\",\n      isGameCreator: false,\n      numTypers: 0,\n      numberQuestions: 10,\n    };\n  }\n\n  componentDidMount() {\n    this.socket.on(\"start countdown\", (countdownLength) => {\n      this.countdownTimer(countdownLength);\n      this.setState({\n        appState: \"play\",\n      });\n    });\n    this.socket.on(\"question\", (q) => {\n      this.setState({\n        currentQuestion: q,\n        correctAnswer: undefined,\n        userAnswer: \"-1\",\n      });\n    });\n    this.socket.on(\"request answer\", () => {\n      // validate on client or server side????????\n      // server also needs to know for the score... so might as well do it there....\n      this.socket.emit(\n        \"validate answer\",\n        {\n          answer: this.state.userAnswer,\n          questionNum: this.state.currentQuestion.index,\n          gameID: this.state.gameID,\n        },\n        ({ isCorrect, correctAnswer }) => {\n          this.setState({ correctAnswer: correctAnswer });\n        }\n      );\n    });\n    this.socket.on(\"number typers\", (n) => this.setState({ numTypers: n }));\n    this.socket.on(\"players\", (p) => this.setState({ players: p }));\n    this.socket.on(\"joining\", (n) => {\n      console.log(\"num joiners is \" + n);\n      this.setState({ numJoiners: n });\n    });\n    this.socket.on(\"game over\", () =>\n      this.setState({\n        currentQuestion: undefined,\n        correctAnswer: undefined,\n        userAnswer: \"-1\",\n      })\n    );\n  }\n\n  countdownTimer = (n) => {\n    this.setState({ countdownTime: n });\n    if (n > 0) {\n      setTimeout(() => this.countdownTimer(n - 1), 1000);\n    }\n  };\n\n  handleNewGameID = (gameID) => {\n    this.setState({ gameID: gameID });\n  };\n\n  joinGame = () => {\n    this.setState({ isGameCreator: false });\n    this.socket.emit(\"join game\", this.state.gameID, (callbackData) => {\n      if (callbackData.sucess) {\n        this.setState({ appState: \"join\" });\n        // this.handleTyping(true);\n      } else {\n        console.log(callbackData.errorMsg);\n      }\n    });\n  };\n\n  createNewGame = () => {\n    this.setState({ isGameCreator: true, appState: \"join\" });\n    this.socket.emit(\"create new game\", {}, (gameID) => {\n      console.log(\"got gameid from callback: \" + gameID);\n      this.setState({ gameID: gameID });\n    });\n    axios.get(`${this.SERVER}/categories`).then((cats) => {\n      console.log(cats.data);\n      this.setState({ categories: cats.data });\n    });\n  };\n\n  startGame = () => {\n    this.socket.emit(\"start game\", {\n      gameID: this.state.gameID,\n      category: this.state.category,\n      difficulty: this.state.difficulty,\n      numberQuestions: this.state.numberQuestions\n    });\n    this.setState({ appState: \"play\" });\n  };\n\n  handleChange = (event) => {\n    this.setState({\n      [event.target.name]: event.target.value,\n    });\n    console.log(\"changed \" + event.target.name + \" to \" + event.target.value);\n  };\n\n  // handleTyping = (isTyping) => {\n  //   this.socket.emit(\"handle typer\", {\n  //     gameID: this.state.gameID,\n  //     incNum: isTyping ? 1 : -1,\n  //   });\n  // };\n\n  handleSubmitName = () => {\n    // this.handleTyping(false);\n    this.socket.emit(\"submit name\", {\n      gameID: this.state.gameID,\n      playerName: this.state.playerName,\n    });\n    this.socket.emit(\"joining\", { numInc: -1, gameID: this.state.gameID });\n  };\n\n  render() {\n    if (this.state.appState === \"init\") {\n      return (\n        <div>\n          <label for=\"gameID\">join a game:</label>\n          <input\n            id=\"gameID\"\n            name=\"gameID\"\n            placeholder=\"game code\"\n            value={this.state.gameID}\n            onChange={this.handleChange}\n          />\n          <button onClick={this.joinGame}>join</button>\n          <br />\n          ---- or ----\n          <br />\n          <button onClick={this.createNewGame}>create new game</button>\n        </div>\n      );\n    }\n    if (this.state.appState === \"join\") {\n      return (\n        <div>\n          <p>{this.state.gameID}</p>\n          <input\n            name=\"playerName\"\n            onChange={this.handleChange}\n            value={this.state.playerName}\n            placeholder=\"your name\"\n          />\n          <button onClick={this.handleSubmitName}>submit</button>\n\n          {this.state.numJoiners > 0 && (\n            <p>\n              <i>someone is joining...</i>\n            </p>\n          )}\n          {this.state.players && (\n            <ul>\n              <h2>Players:</h2>\n              {Object.entries(this.state.players).map(([id, pl]) => {\n                return <li key={id}>{pl.name}</li>;\n              })}\n            </ul>\n          )}\n\n          {this.state.isGameCreator && (\n            <div>\n              <h2>Select a category:</h2>\n              {this.state.categories && (\n                <div>\n                  <label>\n                    <input\n                      type=\"radio\"\n                      name=\"selectedCategory\"\n                      value={-1}\n                      onChange={this.handleChange}\n                      checked={this.state.selectedCategory === \"-1\"}\n                    />\n                    Any category\n                  </label>\n                  {this.state.categories.map((cat) => (\n                    <label key={cat.id}>\n                      <input\n                        type=\"radio\"\n                        name=\"selectedCategory\"\n                        value={cat.id}\n                        onChange={this.handleChange}\n                        checked={\n                          this.state.selectedCategory === cat.id.toString()\n                        }\n                      />\n                      {cat.name}\n                    </label>\n                  ))}\n                </div>\n              )}\n              <h2>Select difficulty:</h2>\n              <label>\n                <input\n                  type=\"radio\"\n                  name=\"difficulty\"\n                  value={-1}\n                  onChange={this.handleChange}\n                  checked={this.state.difficulty === \"-1\"}\n                />\n                Any difficulty\n              </label>\n              <label>\n                <input\n                  type=\"radio\"\n                  name=\"difficulty\"\n                  value=\"easy\"\n                  onChange={this.handleChange}\n                  checked={this.state.difficulty === \"easy\"}\n                />\n                Easy\n              </label>\n              <label>\n                <input\n                  type=\"radio\"\n                  name=\"difficulty\"\n                  value=\"medium\"\n                  onChange={this.handleChange}\n                  checked={this.state.difficulty === \"medium\"}\n                />\n                Medium\n              </label>\n              <label>\n                <input\n                  type=\"radio\"\n                  name=\"difficulty\"\n                  value=\"hard\"\n                  onChange={this.handleChange}\n                  checked={this.state.difficulty === \"hard\"}\n                />\n                Hard\n              </label>\n              <h2>Number of questions</h2>\n              <input\n                type=\"number\"\n                value={this.state.numberQuestions}\n                name=\"numberQuestions\"\n                onChange={this.handleChange}\n              ></input>\n              <button onClick={this.startGame}>start game</button>\n            </div>\n          )}\n        </div>\n      );\n    }\n    return (\n      <div>\n        {this.state.countdownTime > 0 && (\n          <p>starting game in {this.state.countdownTime}</p>\n        )}\n        {this.state.currentQuestion && (\n          <div>\n            <p>{this.state.currentQuestion.question}</p>\n            {this.state.currentQuestion.answers.map((a, idx) => (\n              <label key={idx}>\n                <input\n                  type=\"radio\"\n                  name=\"userAnswer\"\n                  value={idx}\n                  onChange={this.handleChange}\n                  className={\n                    idx === this.state.correctAnswer ? \"right\" : \"wrong\"\n                  }\n                  checked={this.state.userAnswer === idx.toString()}\n                  disabled={this.state.correctAnswer}\n                />\n                {a}\n              </label>\n            ))}\n          </div>\n        )}\n        <p>{this.state.correctAnswer}</p>\n\n        {this.state.players && (\n          <ul>\n            <h2>Leaderboard:</h2>\n            {Object.entries(this.state.players).map(([id, pl]) => {\n              return (\n                <li key={id}>\n                  <b>{pl.name}</b>: {pl.score}\n                </li>\n              );\n            })}\n          </ul>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}